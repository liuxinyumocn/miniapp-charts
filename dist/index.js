!function(t){var i={};function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)e.d(n,r,function(i){return t[i]}.bind(null,r));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";function n(t,i){var e=Object.prototype.toString;return"Null"===i&&null===t||"Undefined"===i&&void 0===t||e.call(t).slice(8,-1)===i}function r(t={},i={}){for(var e in t){var s=t[e];t!==s&&(n(s,"Object")?i[e]=r(s,i[e]||{}):n(s,"Array")?(i[e]=[],i[e]=r(s,i[e]||[])):i[e]=s)}return i}function s(t,i){return Object.prototype.toString.call(i).match(/\s(\w+)/)[1].toLowerCase()===t}function o(t){return!!t&&s("object",t)}function a(t,i){if(!o(t)||!o(i))throw"destination and source must be type of object";for(let e in i)t[e]=i[e];return t}function h(t,i){let e;return e=t>=100?String(t).split("").reduce((t,i)=>10*t,.01):t>=10?5:t>1?1:.1}function l(t,i){let e,n=h(t);return 0===t?0:("up"===i?e=t+(n-t%n):"down"===i&&(e=t-t%n),e)}function d(t,i,e){if(0===t)return{max:4,min:0,divider:1,multiple:1};if(t===i)return{max:t+2,min:i-2>=0?i-2:0,divider:1,multiple:1};let n=1;(t-i)/e<1&&(t*=n=1e4,i*=n);let r=t,s=Math.round((t-i)/e);t+=t%(s=l(s,"down")),i=l(i-=i%s,"down");let o=h(s),a=!0;for(;a;){let n=i+s*e;(n>=t||n-r>=10*o)&&(a=!1),s+=o}return{max:(i+s*e)/n,min:i/n,divider:s/n,multiple:n}}function c(t,i=1){if(e=t,isNaN(parseFloat(e))||!isFinite(e))return t;var e;let n=parseFloat(t),r="",s=1;if(function(t){return Number(t)===t&&t%1!=0}(t)&&n<1e3)return n.toFixed(i);n<1e3||(n<1e4?(r="k",s=1e3):n<1e7?(r="w",s=1e4):(r="kw",s=1e7));let o=n/s;return o-Math.floor(o)<.5*Math.pow(.1,i)&&(i=0),o.toFixed(i)+r}function f(){}e.r(i);var u={debug:!1,width:414,height:200,unit:"",changeUnit:f,padding:{left:10,right:10,top:10,bottom:5}};var x=a({unit:"",changeUnit:f,formatY:null,lineStyle:{lineWidth:1,lineColor:"#7587db",fillColor:"rgba(117, 135, 219, 0.3)",needFill:!0,circle:{show:!0,fillColor:"#FFFFFF",strokeColor:"#FFAA00",radius:1.2}},maxCircleCount:30,xAxisCount:7,xAxis:{show:!0,marginTop:10,color:"#B8B8B8",fontSize:11},xAxisLine:{show:!1,centerShow:!0,width:.6,color:"#C6C6C6",style:"solid"},yAxisCount:4,yAxis:{show:!0,marginLeft:0,marginRight:10,color:"#B8B8B8",fontSize:11},yAxisLine:{show:!0,centerShow:!1,width:.2,color:"#C6C6C6"},toolTip:{lineColor:"#C6C6C6",lineWidth:.5,fontSize:11,color:"#FFFFFF",fillColor:"rgba(136, 136, 136, 0.6)",linePadding:5,padding:{left:5,right:5,top:5,bottom:5}}},u);class g{wordWidth(t,i){if(null==t)return 0;let e=0;for(let n=0;n<t.length;n++){e+=t.charCodeAt(n)>128?i:i/2}return e}getWordWidth(t){"number"==typeof t.text&&(t.text=t.text.toString());let i=this.wordWidth(t.text,t.fontSize);return Math.ceil(i)}drawWord(t,i){"number"==typeof i.text&&(i.text=i.text.toString()),t.beginPath(),i.isbottom&&t.setTextBaseline("bottom"),t.setFontSize(i.fontSize),t.setFillStyle(i.color),t.setTextAlign(i.textAlign||"left"),t.fillText(i.text,i.x,i.y),t.stroke(),t.closePath()}drawRect(t,i){t.beginPath(),t.setStrokeStyle(i.fillColor),t.setFillStyle(i.fillColor),t.fillRect(i.x,i.y,i.width,i.height),t.closePath()}drawLine(t,i){t.beginPath(),t.setLineWidth(i.width||1),t.setStrokeStyle(i.color),i.isDash&&t.setLineDash(i.dashPattern,i.dashOffset),t.moveTo(i.start.x,i.start.y),t.lineTo(i.end.x,i.end.y),t.stroke(),t.closePath(),t.setLineDash([0],0)}drawLongLine(t,i){t.beginPath(),t.setLineWidth(i.width||1),t.setStrokeStyle(i.color),i.isDash&&t.setLineDash(i.dashPattern,i.dashOffset);let e=i.points||[];for(let i=0;i<e.length;i++){let n=e[i];0===i?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y)}i.fill&&(t.setFillStyle(i.fillColor),t.fill()),t.stroke(),t.closePath(),t.setLineDash([0],0)}drawLongLineWithFill(t,i,e={lineWidth:1,lineColor:"#7587db",fillColor:"rgba(117, 135, 219, 0.3)"}){t.beginPath(),t.setFillStyle(e.fillColor),t.setLineWidth(e.lineWidth),t.setStrokeStyle(e.lineColor);let n=i[0],r=i[i.length-1];t.moveTo(n.x,n.y);for(let e=1;e<i.length-1;e++){let n=i[e];1===e?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y)}t.stroke(),t.lineTo(r.x,r.y),t.lineTo(n.x,n.y),t.fill(),t.closePath()}drawCircle(t,i){t.beginPath(),t.setStrokeStyle(i.strokeColor),t.setFillStyle(i.fillColor),t.setLineWidth(i.lineWidth||1),t.arc(i.x,i.y,i.r,0,2*Math.PI),t.stroke(),t.fill(),t.closePath()}clearCanvas(t,i,e){t.clearRect(0,0,i,e),t.draw()}}var y={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0==t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1==t?1:1*(1-Math.pow(2,-10*t/1))},easeInOutExpo:function(t){return 0==t?0:1==t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var i=1.70158,e=0,n=1;if(0==t)return 0;if(1==(t/=1))return 1;if(e||(e=.3),n<Math.abs(1)){n=1;i=e/4}else i=e/(2*Math.PI)*Math.asin(1/n);return-n*Math.pow(2,10*(t-=1))*Math.sin((1*t-i)*(2*Math.PI)/e)},easeOutElastic:function(t){var i=1.70158,e=0,n=1;if(0==t)return 0;if(1==(t/=1))return 1;if(e||(e=.3),n<Math.abs(1)){n=1;i=e/4}else i=e/(2*Math.PI)*Math.asin(1/n);return n*Math.pow(2,-10*t)*Math.sin((1*t-i)*(2*Math.PI)/e)+1},easeInOutElastic:function(t){var i=1.70158,e=0,n=1;if(0==t)return 0;if(2==(t/=.5))return 1;if(e||(e=.3*1.5*1),n<Math.abs(1)){n=1;i=e/4}else i=e/(2*Math.PI)*Math.asin(1/n);return t<1?n*Math.pow(2,10*(t-=1))*Math.sin((1*t-i)*(2*Math.PI)/e)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((1*t-i)*(2*Math.PI)/e)*.5+1},easeInBack:function(t){var i=1.70158;return 1*(t/=1)*t*((i+1)*t-i)},easeOutBack:function(t){var i=1.70158;return 1*((t=t/1-1)*t*((i+1)*t+i)+1)},easeInOutBack:function(t){var i=1.70158;return(t/=.5)<1?t*t*((1+(i*=1.525))*t-i)*.5:.5*((t-=2)*t*((1+(i*=1.525))*t+i)+2)},easeInBounce:function(t){return 1-animationOptions.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t*1:t<2/2.75?1*(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return t<.5?.5*animationOptions.easeInBounce(2*t):.5*animationOptions.easeOutBounce(2*t-1)+.5}};class _ extends g{constructor(){super(),this._start=0,this._render={},this._performance={},this._boundary={}}getConfig(t,i){if(!o(t))throw new Error("options must be type of Object");for(let e in i)if(void 0!==t[e]){if(typeof i[e]!=typeof t[e])throw new Error(`TypeMismatch：${e} must be type of ${typeof i[e]}`);o(t[e])?this.getConfig(t[e],i[e]):i[e]=t[e]}return i}requestAnimFrame(t){"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(t):setTimeout(t,1e3/60)}animationLopp(t,i){let e=1/(t.animationStep||1),n=y[t.animationEasing],r=t.animation?0:1,s=()=>{let e=t.animation?n(r):1;e>1&&(e=1),i.call(this,e)},o=()=>{r+=e,s(),r<=1?this.requestAnimFrame(o):t.onAnimationComplete&&t.onAnimationComplete()};this.requestAnimFrame(o)}}class p extends _{constructor(t,i={},e){super(),this.chartType="line",this.ctx1=t,this.ctx2=e||t,this._start=0,this._performance={},this._config=this.getConfig(i),this._boundary={},this._datasets=[],this._render={},this._touchTimer=0}log(t){this._performance[t]=new Date-this._start}getConfig(t,i){if(!o(t))throw new Error("options must be type of Object");let e=i||r(x);for(let i in e)if(void 0!==t[i]){if(typeof e[i]!=typeof t[i])throw new Error(`[LineChart] TypeMismatch：${i} must be type of ${typeof e[i]}`);o(t[i])?e[i]=a(e[i],t[i]):e[i]=t[i]}return e}calBoundaryPoint(){let t=this._config,i=this._config.padding;return this._boundary.leftTop={x:i.left,y:i.top},this._boundary.leftBottom={x:i.left,y:t.height-i.bottom-t.xAxis.fontSize-t.xAxis.marginTop},this._boundary.rightTop={x:t.width-i.right,y:i.top},this._boundary.rightBottom={x:t.width-i.right,y:this._boundary.leftBottom.y},this._boundary.size={width:this._boundary.rightTop.x-this._boundary.leftTop.x,height:this._boundary.leftBottom.y-this._boundary.leftTop.y},this.log("calBoundaryPoint"),this._boundary}calPointData(){let t=[],i=this._render.yAxisWidth,e=this._boundary.leftBottom,n=e.x+i,r=this._render.longestLine,s=this._config.maxCircleCount>=r.points.length,o={x:e.x+i,y:e.y},a=[];this._datasets.forEach(i=>{let r=i.style,h=r.circle,l=i.points,d=l.length,c={points:[],style:r};l.forEach((t,i)=>{if(i<d){let o={x:n+i*this._render.unitX,y:e.y-(t.y-this._render.min)*this._render.unitY*this._render.yMultiple};if(r.circle&&r.circle.show&&s){let t={x:o.x,y:o.y,r:h.radius||2,fillColor:h.fillColor||"#FFFFFF",strokeColor:r.lineColor,lineWidth:r.lineWidth};a.push(t)}c.points.push(o)}}),l.length>1&&(c.points.unshift(o),c.points.push({x:c.points[c.points.length-1].x,y:e.y}),t.push(c))}),this._render.circlePoints=a,this._render.pointData=t}calXAxisLines(){let t=this._render.yAxisWidth,i=this._boundary.leftBottom,e=this._boundary.rightBottom,n=this._config.xAxisLine;this._render.xCenterAxis={start:{x:i.x+t,y:i.y},end:{x:e.x,y:i.y},width:n.width,color:n.color}}calXAxis(){this._datasets;let t=this._render,i=this._render.longestLinePointCnt,e=this._config.xAxisCount,n=this._render.longestLine.points,r=this._config.xAxis,s=this._boundary.leftBottom,o=[],a=this._boundary.rightBottom.x-s.x-this._render.yAxisWidth,h=n.length-1>0?n.length-1:1;t.unitX=a/h;let l=parseInt(i/e);0===l&&(l=1);let d=this._render.yAxisWidth+s.x,c=s.y+r.marginTop+r.fontSize;for(let e=0;e<i;e+=l){let i={text:n[e].x,color:r.color,fontSize:r.fontSize,x:d+e*t.unitX,y:c},s=this.getWordWidth(i);i.x-=s/2,i.x+s>this._config.width&&(i.x=this._config.width-s-1),o.push(i)}this._render.xAxisData=o}calYAxisLines(){let t=this._render.yAxisWidth,i=this._boundary.leftTop,e=this._boundary.leftBottom,n=this._boundary.rightBottom,r=this._config.yAxisLine;this._render.yCenterAxis={start:{x:i.x+t,y:i.y},end:{x:i.x+t,y:e.y},width:r.width,color:r.color},this._render.yAxisLines=[],this._render.yAxisData.forEach((i,e)=>{e>0&&this._render.yAxisLines.push({start:{x:i.x+t,y:i.y},end:{x:n.x,y:i.y},width:r.width,color:r.color})})}calYAxis(){let{max:t,min:i,yDivider:e,maxYPoint:n,longestLine:r}=this.calYAxisBoundary(),s=this._config.yAxis,o=(this._config.yAxisLine,[]),a=0,h=(this._boundary.leftBottom.y-this._boundary.leftTop.y)/(e*this._render.yMultiple*this._config.yAxisCount),l=this._boundary.leftTop.x+s.marginLeft,d=this._boundary.leftBottom.y,u=this._config.changeUnit&&this._config.changeUnit!==f?this._config.changeUnit:c,x=t<1||t>1e7?2:1;for(let t=0;t<this._config.yAxisCount+1;t++){let n={text:u(i+t*e,x)+this._config.unit,color:s.color,fontSize:s.fontSize,x:l,y:d-t*e*h*this._render.yMultiple};a=Math.max(this.getWordWidth(n),a),o.push(n)}a=s.show?a+s.marginRight:0,this._render.unitY=h,this._render.yAxisWidth=a,this._render.yAxisData=o,this._render.longestLinePointCnt=n,this._render.longestLine=r,this.log("calYAxis")}getMinY(t){return t.reduce((t,i)=>i.y<t?i.y:t,t[0].y)}getMaxY(t){return t.reduce((t,i)=>i.y>t?i.y:t,t[0].y)}calYAxisBoundary(){let t=this._datasets,i=0,e=t[0],n=this._config.yAxisCount,r=-1/0,s=1/0;new Date;t.forEach(t=>{let n=t.points||[];n.length>i&&(i=n.length,e=t),r=Math.max(this.getMaxY(n),r),s=Math.min(this.getMinY(n),s)});let o=(this._config.formatY||d)(r,s,n);return this._render.min=o.min,this._render.max=o.max,this._render.yMultiple=o.multiple||1,{max:o.max,min:o.min,yDivider:o.divider,maxYPoint:i,longestLine:e}}calToolTipPointData(t){let i=t.touches[0].x,e=this._boundary.leftTop,n=this._boundary.rightTop,r=this._boundary.leftBottom,s=this._render.longestLine,o=this._render.yAxisWidth,a=i-(e.x+o);a<0?a=0:a>n.x&&(a=n.x);let h=Math.round(a/this._render.unitX);h>s.points.length-1&&(h=s.points.length-1),this._render.toolTipData={currPoints:[],pindex:h,leftDis:a},this._datasets.forEach((t,i)=>{let e=this._render.pointData[i].points[h+1],n=t.style;if(e){let t={x:e.x,y:e.y,st:0,ed:2*Math.PI,r:n.circle.radius,fillColor:n.lineColor,strokeColor:n.lineColor};this._render.toolTipData.currPoints.push(t)}});let l=this._render.toolTipData.currPoints[0],d=this._config.toolTip;this._render.toolTipData.currPointsLine={start:{x:l.x,y:e.y},end:{x:l.x,y:r.y},color:d.lineColor,width:d.lineWidth}}calToolTipWordData(t){this._render.toolTipData.circles=[];let i=this._render.toolTipData.wrapper,e=this._render.longestLine,n=this._config.toolTip,r=i.x,s=i.y,o=this._render.toolTipData.words,a={x:0,y:s+n.fontSize+n.linePadding,fontSize:n.fontSize,color:n.color,text:e.points[this._render.toolTipData.pindex].x};s+=n.fontSize+n.linePadding,o.forEach((t,i)=>{t.x=r+n.padding.left,t.y=s+n.padding.top+n.fontSize+i*(n.fontSize+n.linePadding);let e={x:r+n.padding.left+n.fontSize/2,y:t.y-n.fontSize/2+1,strokeColor:t.line.style.lineColor,fillColor:t.line.style.lineColor,r:n.fontSize/2};this._render.toolTipData.circles.push(e),t.x+=n.fontSize+5}),a.x=o[0].x,o.unshift(a)}calToolTipWrapperData(t){let i=this._config.toolTip,e=this._render.longestLine,n=this._render.toolTipData.pindex,r=(e.points[n].x,0),s=i.padding.left+i.padding.right+i.fontSize+5,o=i.padding.top+i.padding.bottom+i.fontSize+i.linePadding;this._render.toolTipData.words=[];let a=this._config.changeUnit&&this._config.changeUnit!==f?this._config.changeUnit:c,h=this._render.max<1||this._render>1e7?2:1;this._datasets.forEach(t=>{let e=t.points[n],s=t.lineName?t.lineName+": ":"";if(e){let n={text:s+a(e.y,h)+this._config.unit,fontSize:i.fontSize,color:i.color,x:0,y:0,line:t};r=Math.max(r,this.getWordWidth(n)),o+=i.fontSize+i.linePadding,this._render.toolTipData.words.push(n)}}),s+=r;let l=this._render.toolTipData,d=this._boundary.leftTop,u=this._boundary.rightTop;this._render.toolTipData.wrapper={width:s,height:o,x:u.x-l.currPointsLine.start.x>s?l.currPointsLine.start.x+3:l.currPointsLine.start.x-s-3,y:d.y+10,fillColor:i.fillColor}}calToolTipData(t){this.calToolTipPointData(t),this.calToolTipWrapperData(t),this.calToolTipWordData(t)}drawXAxis(){this._render.xAxisData.forEach(t=>{this.drawWord(this.ctx1,t)}),this._config.xAxisLine.centerShow&&this.drawLine(this.ctx1,this._render.xCenterAxis)}drawYAxis(){this._render.yAxisData.forEach(t=>{this.drawWord(this.ctx1,t)}),this._config.yAxis.centerShow&&this.drawLine(this.ctx1,this._render.yCenterAxis)}drawYAxisLine(){this._config.yAxisLine.show&&this._render.yAxisLines.forEach(t=>{this.drawLine(this.ctx1,t)})}drawXAxisLine(){}drawPoints(){this._render.pointData.forEach(t=>{t.points.length>1&&this.drawLongLineWithFill(this.ctx1,t.points,t.style)}),this._render.circlePoints.forEach(t=>{this.drawCircle(this.ctx1,t)})}drawToolTip(){let t=this._render.toolTipData;t.currPoints.forEach(t=>{this.drawCircle(this.ctx2,t)}),this.drawLine(this.ctx2,t.currPointsLine),this.drawRect(this.ctx2,t.wrapper),t.words.forEach(t=>{this.drawWord(this.ctx2,t)}),t.circles.forEach(t=>{this.drawCircle(this.ctx2,t)})}drawToCanvas(){this.drawYAxis(),this.log("drawYAxis"),this.drawYAxisLine(),this.log("drawYAxisLine"),this.drawXAxis(),this.log("drawXAxis"),this.drawPoints(),this.log("drawPoints")}initDataSets(t){let i=t.datasets||[];this._datasets=i.filter(t=>t.points&&t.points.length),this._datasets.forEach(t=>{let i=r(this._config.lineStyle),e=t.style||{};if(!o(e))throw new Error("[LineChart] TypeMismatch：the style of dataset must be type of Object");for(let t in e)i[t]&&(o(i[t])?i[t]=a(i[t],e[t]):i[t]=e[t]);t.style=i})}initData(t){this.initDataSets(t),this._datasets.length&&(this.calBoundaryPoint(),this.calYAxis(),this.calYAxisLines(),this.calXAxis(),this.calXAxisLines(),this.calPointData(),this.log("initData"))}clear(){this.clearCanvas(this.ctx1,this._config.width,this._config.height),this.clearCanvas(this.ctx2,this._config.width,this._config.height)}draw(t,i={}){this._start=new Date,this.clearCanvas(this.ctx2,this._config.width,this._config.height),this.getConfig(i,this._config),this.initData(t),this._datasets.length&&(this.drawToCanvas(),this.ctx1.draw(),this.log("realDraw"),this._config.debug&&console.log(this._performance))}touchHandler(t){new Date;this.ctx2===this.ctx1&&this.drawToCanvas(),this.calToolTipData(t),this.drawToolTip(),this.ctx2.draw()}touch(t){clearTimeout(this._touchTimer),this._touchTimer=setTimeout(()=>{this.touchHandler(t)},5)}touchEnd(t){this.ctx2===this.ctx1&&this.drawToCanvas(),this.ctx2.draw()}}var b=a({unit:"",changeUnit:f,formatY:null,maxY:1/0,xAxis:{show:!0,marginTop:10,color:"#B8B8B8",fontSize:11},xAxisLine:{show:!1,centerShow:!0,width:.6,color:"#C6C6C6",style:"solid"},yAxisCount:4,yAxis:{show:!0,marginLeft:0,marginRight:10,color:"#B8B8B8",fontSize:11},yAxisLine:{show:!0,centerShow:!1,width:.2,color:"#C6C6C6"},barStyle:{fillColor:"#6684C7"},barWidth:30,compareBarMargin:5,leftRightPadding:10,barLabelStyle:{color:"#B8B8B8",fontSize:11,paddingBottom:5}},u);class m extends _{constructor(t,i={}){super(),this.chartType="bar",this.ctx1=t,this._start=0,this._performance={},this._config=this.getConfig(i),this._boundary={},this._datasets=[],this._render={}}log(t){this._performance[t]=new Date-this._start}getConfig(t,i){if(!o(t))throw new Error("options must be type of Object");let e=i||r(b);for(let i in e)if(void 0!==t[i]){if(typeof e[i]!=typeof t[i])throw new Error(`[BarChart] TypeMismatch：${i} must be type of ${typeof e[i]}`);o(t[i])?e[i]=a(e[i],t[i]):e[i]=t[i]}return e}calBoundaryPoint(){let t=this._config,i=this._config.padding;return this._boundary.leftTop={x:i.left,y:i.top},this._boundary.leftBottom={x:i.left,y:t.height-i.bottom-t.xAxis.fontSize-t.xAxis.marginTop},this._boundary.rightTop={x:t.width-i.right,y:i.top},this._boundary.rightBottom={x:t.width-i.right,y:this._boundary.leftBottom.y},this._boundary.size={width:this._boundary.rightTop.x-this._boundary.leftTop.x,height:this._boundary.leftBottom.y-this._boundary.leftTop.y},this.log("calBoundaryPoint"),this._boundary}calLabelDataForItem(t,i,e){let n=s("array",e)?e:[e],o=0,h=[];return n.forEach(e=>{let n=r(this._config.barLabelStyle),l=s("object",e)?e:{name:e,style:n};l.style=a(n,l.style||{}),i-=l.style.paddingBottom,o+=l.style.paddingBottom,h.push({text:l.name||"",color:l.style.color,fontSize:l.style.fontSize,x:t,y:i,textAlign:"center"}),i-=l.style.fontSize,o+=l.style.fontSize}),{arr:h,height:o}}calBarData(){const t=this._render.xCenterAxis,i=this._datasets[0],e=this._datasets[1],n=i.points.length;let r=this._boundary.leftBottom,s=this._datasets.length*n*this._config.barWidth;e&&(s+=this._config.compareBarMargin*n);const o=(t.end.x-t.start.x-s-2*this._config.leftRightPadding)/(n-1);let a=t.start.x+this._config.leftRightPadding;this._render.bars=[],this._render.barLabels=[],this._render.topbarLabels=[];const h=this._config.barWidth,l=this._config.xAxis,d=r.y+l.marginTop+l.fontSize;i.points.forEach((t,n)=>{const s=(t.value-this._render.min)*this._render.unitY*this._render.yMultiple,c=r.y-s;let f=a+h/2;const u={fillColor:i.fillColor||this._config.barStyle.fillColor,x:a,y:c,width:this._config.barWidth,height:s};if(this._render.bars.push(u),t.barLabel){let{arr:i}=this.calLabelDataForItem(a+this._config.barWidth/2+1,c,t.barLabel);this._render.topbarLabels=this._render.topbarLabels.concat(i)}if(a+=this._config.barWidth,e){a+=this._config.compareBarMargin;let i=e.points[n];const s=(i.value-this._render.min)*this._render.unitY*this._render.yMultiple,l=r.y-s,d={fillColor:e.fillColor||this._config.barStyle.fillColor,x:a,y:l,width:this._config.barWidth,height:s};if(this._render.bars.push(d),f+=h/2+this._config.compareBarMargin/2,i.barLabel){let{arr:i}=this.calLabelDataForItem(a+this._config.barWidth/2+1,l,t.barLabel);this._render.topbarLabels=this._render.topbarLabels.concat(i)}a+=this._config.barWidth+o}else a+=o;this._render.barLabels.push({text:t.label||"",color:l.color,fontSize:l.fontSize,x:f,y:d,textAlign:"center"})})}calXAxisLines(){let t=this._render.yAxisWidth,i=this._boundary.leftBottom,e=this._boundary.rightBottom,n=this._config.xAxisLine;this._render.xCenterAxis={start:{x:i.x+t,y:i.y},end:{x:e.x,y:i.y},width:n.width,color:n.color}}calXAxis(){this._datasets;let t=this._render,i=this._render.longestLinePointCnt,e=this._config.xAxisCount,n=this._render.longestLine.points,r=this._config.xAxis,s=this._boundary.leftBottom,o=[],a=this._boundary.rightBottom.x-s.x-this._render.yAxisWidth,h=n.length-1>0?n.length-1:1;t.unitX=a/h;let l=parseInt(i/e);0===l&&(l=1);let d=this._render.yAxisWidth+s.x,c=s.y+r.marginTop+r.fontSize;for(let e=0;e<i;e+=l){let i={text:n[e].x,color:r.color,fontSize:r.fontSize,x:d+e*t.unitX,y:c},s=this.getWordWidth(i);i.x-=s/2,i.x+s>this._config.width&&(i.x=this._config.width-s-1),o.push(i)}this._render.xAxisData=o}calYAxisLines(){let t=this._render.yAxisWidth,i=this._boundary.leftTop,e=this._boundary.leftBottom,n=this._boundary.rightBottom,r=this._config.yAxisLine;this._render.yCenterAxis={start:{x:i.x+t,y:i.y},end:{x:i.x+t,y:e.y},width:r.width,color:r.color},this._render.yAxisLines=[],this._render.yAxisData.forEach((i,e)=>{e>0&&this._render.yAxisLines.push({start:{x:i.x+t,y:i.y},end:{x:n.x,y:i.y},width:r.width,color:r.color})})}calYAxis(){let t,{max:i,min:e,yDivider:n,maxYPoint:r,longestLine:s}=this.calYAxisBoundary();this._datasets.forEach(i=>{i.points.forEach(i=>{t?i.value>t.value&&(t=i):t=i})});const{height:o}=this.calLabelDataForItem(0,0,t.barLabel||[]);let a=this._config.yAxis,h=(this._config.yAxisLine,[]),l=0,d=this._boundary.leftBottom.y-this._boundary.leftTop.y,u=d/(n*this._render.yMultiple*this._config.yAxisCount);(t.value-e)*u*this._render.yMultiple+o>d&&(u=(d-o)/(t.value-e)/this._render.yMultiple);let x=this._boundary.leftTop.x+a.marginLeft,g=this._boundary.leftBottom.y,y=this._config.changeUnit&&this._config.changeUnit!==f?this._config.changeUnit:c,_=i<1||i>1e7?2:1;for(let t=0;t<this._config.yAxisCount+1;t++){let i={text:y(e+t*n,_)+this._config.unit,color:a.color,fontSize:a.fontSize,x:x,y:g-t*n*u*this._render.yMultiple};l=Math.max(this.getWordWidth(i),l),h.push(i)}l=a.show?l+a.marginRight:0,this._render.unitY=u,this._render.yAxisWidth=l,this._render.yAxisData=h,this._render.longestLinePointCnt=r,this._render.longestLine=s,this.log("calYAxis")}getMinY(t){return t.reduce((t,i)=>i.value<t?i.value:t,t[0].value)}getMaxY(t){return t.reduce((t,i)=>i.value>t?i.value:t,t[0].value)}calYAxisBoundary(){let t=this._datasets,i=0,e=t[0],n=this._config.yAxisCount,r=-1/0,s=1/0;new Date;t.forEach(t=>{let n=t.points||[];n.length>i&&(i=n.length,e=t),r=Math.max(this.getMaxY(n),r),s=Math.min(this.getMinY(n),s)});let o=(this._config.formatY||d)(r,s,n);return this._render.min=o.min,this._render.max=o.max,this._render.yMultiple=o.multiple||1,{max:o.max,min:o.min,yDivider:o.divider,maxYPoint:i,longestLine:e}}drawXAxis(){this._config.xAxisLine.centerShow&&this.drawLine(this.ctx1,this._render.xCenterAxis)}drawYAxis(){this._config.yAxis.show&&this._render.yAxisData.forEach(t=>{this.drawWord(this.ctx1,t)}),this._config.yAxis.centerShow&&this.drawLine(this.ctx1,this._render.yCenterAxis)}drawYAxisLine(){this._config.yAxisLine.show&&this._render.yAxisLines.forEach(t=>{this.drawLine(this.ctx1,t)})}drawXAxisLine(){}drawPoints(){this._render.pointData.forEach(t=>{t.points.length>1&&this.drawLongLineWithFill(this.ctx1,t.points,t.style)}),this._render.circlePoints.forEach(t=>{this.drawCircle(this.ctx1,t)})}drawBars(){this._render.bars.forEach(t=>{this.drawRect(this.ctx1,t)}),this._render.barLabels.forEach(t=>{this.drawWord(this.ctx1,t)}),this._render.topbarLabels.forEach(t=>{this.drawWord(this.ctx1,t)})}drawToCanvas(){this.drawYAxis(),this.log("drawYAxis"),this.drawYAxisLine(),this.log("drawYAxisLine"),this.drawXAxis(),this.log("drawXAxis"),this.drawBars(),this.log("drawPoints")}initData(t){this._datasets=t.datasets||[],this._datasets.length&&(this.calBoundaryPoint(),this.calYAxis(),this.calYAxisLines(),this.calXAxisLines(),this.calBarData(),this.log("initData"))}draw(t,i={}){this._start=new Date,this.getConfig(i,this._config),this.initData(t),this._datasets.length&&(this.drawToCanvas(),this.ctx1.draw(),this.log("realDraw"),this._config.debug&&console.log(this._performance))}}var w=a({width:250,height:250,animation:!0,animationStep:50,animationEasing:"linear",padding:{left:5,right:5,top:5,bottom:5},yAxisLine:{display:!1,color:"#B8B8B8"},grid:{display:!0,min:0,max:100,stepSize:20,width:1,color:"#e3e3e3",style:"line",dashPattern:[3],dashOffset:0},radiationLineStyle:{display:!0,dashPattern:[3],width:1,dashOffset:0,color:"#e3e3e3",style:"line"},label:{display:!0,color:"#888888",fontSize:12,margin:{left:3,right:3,top:3,bottom:3}},datasetStyle:{label:"",backgroundColor:"rgba(232, 245, 223, 0.7)",borderColor:"#99d774",borderWidth:2,pointShow:!0,pointBackgroundColor:"#8dd364",pointBorderColor:"#8dd364",pointBorderWidth:1,pointRadius:2},startAngle:0},u);class A extends _{constructor(t,i={}){super(),this.chartType="radar",this.ctx=t,this._config=this.getConfig(i,r(w)),this._render.center=this.getCenterPoint()}getCenterPoint(){return{x:this._config.width/2,y:this._config.height/2}}calAngleLineData(){let t=this._render.center,i=this._render.radius,e=this._render.labels,n=360/e.length,r=t.x,s=t.y,o=this._config.radiationLineStyle,a=this._config.startAngle;return e.map((e,h)=>{let l=Math.PI*(a+n*h)/180,d=r+i*Math.sin(l),c=s-i*Math.cos(l);return{start:t,end:{x:d,y:c},width:o.width,color:o.color,isDash:!("dash"!==o.style),dashPattern:o.dashPattern,dashOffset:o.dashOffset,angel:a+n*h}})}calGridLineData(){let t=this._config.grid,i=this._render.center,e=parseInt((t.max-t.min)/t.stepSize),n=[];for(let r=1;r<=e;r++){let s={color:t.color,width:t.width,isDash:!("dash"!=t.style),dashPattern:t.dashPattern,dashOffset:t.dashOffset,points:[]};this._render.angelLineData.forEach(t=>{let n=i.x+(t.end.x-i.x)*(r/e),o=i.y-(i.y-t.end.y)*(r/e);s.points.push({x:n,y:o})}),s.points.push(s.points[0]),n.push(s)}return this._render.steps=e,n}calDatasetsData(t=1){let i=this._datasets,e=(this._render.steps,this._render.angelLineData),n=this._render.center,s=this._config.grid,o=[],a=this._config.datasetStyle;return i.forEach(i=>{let h=[],l=this.getConfig(i.style||{},r(a));i.style=l,i.data.forEach((i,r)=>{let o=e[r],a=i*t/(s.max-s.min),l=n.x+(o.end.x-n.x)*a,d=n.y-(n.y-o.end.y)*a;h.push({x:l,y:d})}),h.push(h[0]),o.push({points:h,style:l,width:l.borderWidth,color:l.borderColor,fill:!0,fillColor:l.backgroundColor})}),o}calOneLabelSize(t,i={}){this.ctx.setFontSize(i.fontSize);let e=this.ctx.measureText(t).width,n=i.fontSize;return{width:e+=i.margin.left+i.margin.right,height:n+=i.margin.top+i.margin.bottom,style:i}}calLabelSize(){let t=this._config.label,i=this._render.labels;return i.map((e,n)=>{let o,a=0,h=0;if(s("array",e))e.forEach((i,n)=>{if(s("object",i)){let s=this.getConfig(i,r(t));s.text=i.text,e[n]=e,o=this.calOneLabelSize(i.text,s)}else o=s("string",i)?this.calOneLabelSize(i,t):{width:0,height:0};a=Math.max(o.width,a),h+=o.height});else if(s("object",e)){let s=this.getConfig(e,r(t));s.text=e.text||"",i[n]=s,o=this.calOneLabelSize(e.text||"",s),a=o.width,h=o.height}else{let i=this.calOneLabelSize(e,t);a=i.width,h=i.height}return{width:a,height:h,style:t}})}calRadius(){let{left:t,right:i,top:e,bottom:n}=this.calGridBoundary(),r=Math.min(this._config.width,this._config.height)/2,s=this._config.padding,o=this._render.labelsSizeData,a=[{value:r-o[t].width-s.left,index:t},{value:r-o[i].width-s.right,index:i},{value:r-o[e].height-s.top,index:e},{value:r-o[n].height-s.bottom,index:n}];a.sort((t,i)=>t.value-i.value);let h=a[0].value,l=a[a.length-1].value,d=this._config.startAngle+360/this._render.labels.length*a[0].index,c=Math.cos(Math.PI*(d%45)/180);return h/c>l?l:h/c}calGridBoundary(){let t=this._render.center,i=this._config.startAngle,e=360/this._render.labels.length,n=[],r=this._render.labelsSizeData;this._render.labels.forEach((s,o)=>{let a=Math.PI*(i+e*o)/180,h=t.x+100*Math.sin(a),l=t.y-100*Math.cos(a);n.push({x:h,y:l,index:o,size:r[o]})}),n.sort((t,i)=>{return parseFloat(parseFloat(t.x).toFixed(2))-parseFloat(parseFloat(i.x).toFixed(2))||t.size.width-i.size.width});let s=n[0].index,o=n[n.length-1].index;return n.sort((t,i)=>{return parseFloat(parseFloat(t.y).toFixed(2))-parseFloat(parseFloat(i.y).toFixed(2))||t.size.height-i.size.height}),{left:s,right:o,top:n[0].index,bottom:n[n.length-1].index}}calLabelPosData(){let t=this._render.angelLineData,i=this._render.center,e=this._render.labelsSizeData;return this._render.labels.map((n,r)=>{let s,o,a=t[r].end,{width:h,height:l,style:d}=e[r],c=parseInt(a.x),f=parseInt(a.y),u=parseInt(i.x),x=parseInt(i.y);return c===u?s=c-h/2:c>u?s=c:c<u&&(s=c-h),{startX:s,startY:o=f===x?f+l/2:f<x?f-l:f}})}calYAxisData(){}calLabelData(){let t=[],i=this._config.label,e=this._render.labelPosData;return this._render.labels.forEach((n,r)=>{let o=e[r];s("string",n)?t.push({display:i.display,fontSize:i.fontSize,color:i.color,text:n,x:o.startX+i.margin.left,y:o.startY+i.fontSize+i.margin.top,isbottom:!0}):s("array",n)?n.forEach((e,n)=>{s("string",e)&&t.push({display:i.display,fontSize:i.fontSize,color:i.color,text:e,x:o.startX+i.margin.left,y:o.startY+(i.fontSize+i.margin.top)*(n+1),isbottom:!0})}):s("object",n)&&t.push({display:n.display,fontSize:n.fontSize,color:n.color,text:n.text,x:o.startX+n.margin.left,y:o.startY+(n.fontSize+n.margin.top),isbottom:!0})}),t}calPointData(){let t=[];return this._datasets.forEach((i,e)=>{let n=this._render.datasetsData[e].points,r=i.style||this._config.datasetStyle;n.forEach(i=>{t.push({x:i.x,y:i.y,r:r.pointRadius||2,fillColor:r.pointBackgroundColor||"#FFFFFF",strokeColor:r.pointBorderColor,lineWidth:r.pointBorderWidth})})}),t}initData(t){this._datasets=t.datasets||[],this._render.labels=t.labels||[],this._config.startAngle=this._config.startAngle%360,this._render.labelsSizeData=this.calLabelSize(),this._render.radius=this.calRadius(),this._render.angelLineData=this.calAngleLineData(),this._render.gridLineData=this.calGridLineData(),this._render.labelPosData=this.calLabelPosData(),this._render.labelData=this.calLabelData(),this._render.datasetsData=this.calDatasetsData(),this._render.pointData=this.calPointData()}drawToCanvas(t){this._config.radiationLineStyle.display&&this._render.angelLineData.forEach(t=>{this.drawLine(this.ctx,t)}),this._config.grid.display&&this._render.gridLineData.forEach((t,i)=>{this.drawLongLine(this.ctx,t)}),this._render.labelData.forEach(t=>{t.display&&this.drawWord(this.ctx,t)}),this._config.animation&&(this._render.datasetsData=this.calDatasetsData(t),this._render.pointData=this.calPointData()),this._render.datasetsData.forEach(t=>{this.drawLongLine(this.ctx,t)}),this._render.pointData.forEach(t=>{this.drawCircle(this.ctx,t)}),this.ctx.draw()}draw(t,i={}){this._start=new Date,this._config=this.getConfig(i,this._config),this.initData(t),this.animationLopp(this._config,this.drawToCanvas),this._config.debug&&(console.log("time cost:",new Date-this._start,"ms"),console.log("render data:",this._render),console.log("config:",this._config))}}e.d(i,"LineChart",function(){return p}),e.d(i,"BarChart",function(){return m}),e.d(i,"RadarChart",function(){return A})}]);